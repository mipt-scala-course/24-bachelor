# 9 задание

## Контекст

В приложении реализован [сервис](./src/main/scala/mipt/cards/service/CardService.scala) по работе с картами. 
Он работает по REST с внешней системой, которая хранит данные карт пользователей, и с внешним сервисом, 
который управляет доступами пользователей к картам друг друга. Как правило таких доступов немного и меняются они не очень часто. 
Сервис карт возвращает информацию по картам пользователя и всех пользователей, к картам которых он имеет доступ.

Внешний сервис по выдаче информации о картах не может гарантировать нужный нам SLA по доступности, 
поэтому применяется паттерн Fallback Caching, когда результат каждого успешного запроса пишется в кэш, 
и в случае недоступности внешнего сервиса возвращается результат из кэша. 
В случае каких-либо еще ошибок, когда и результат из кэша не доступен, возвращается пустой список (паттерн Null Object). 

Внешний сервис доступов довольно сильно нагружен, при этом данные меняются нечасто, поэтому тут 
используется паттерн кэширующего чтения с ttl, установленным в конфигурации.

В качестве кэша используется Redis.

## Задание

Покройте сервисы тестами. Нужно обязательно убедиться в том, что:
1. Приложение правильно работает со всеми внешними зависимостями
2. Приложение корректно отрабатывает максимальное количество вариантов возможных сетевых сбоев
3. Приложение работает корректно

Все найденные ошибки нужно исправить.

Для выполнения задания используйте:
* в unit-тестах для моков [scalamock](https://scalamock.org/)
* для интеграционных тестов - тестконтейнеры (подключены к проекту) с redis и mockserver (либо wiremock)

Вдохновение можно черпать в [demo с лекции](./demo)
